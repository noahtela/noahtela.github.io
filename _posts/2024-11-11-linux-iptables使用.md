---
layout:     post
title:      "linux-iptables使用"
subtitle:   " \"防火墙\""
date:       2024-11-11 15:34:12
author:     "yangsir"
header-img: "img/bg-material.jpg"
catalog: true
tags:
    - 笔记
    - Linux
    - iptables
    - 防火墙


---

> “Yeah It's on. ”


<p id = "build"></p>

# iptables配置使用



## 防火墙常用名词

- 容器
- 表(table):存放链的容器,防火墙最大概念
- 链(chain):存放规则的容器
- 规则(policy):准许或拒绝规则，未来书写的防火墙条件就是各种防火墙规则

## iptables执行过程

1.防火墙是层层过滤的，实际是按照配置规则的**顺序从上到下**，从前到后进行过滤。

2.如果规则匹配成功，即明确表示是拒绝还是接受。数据包就不再向下匹配新的规则

3.如果规则中没有明确表明是阻止还是通过的，也就是没有匹配规则，向下进行匹配，直到匹配默认规则得到明确的阻止还是通过。‘

4.防火墙的默认规则是所有规则都匹配完才会匹配的

![image-20241111115826682](D:\blogs\img\linux\image-20241111115826682.png)



## 链与表

一般情况下是4表5链

4表

- filter 表：主要用于过滤网络数据包(如阿里云的安全组)
- nat表：用于网络地址转换(共享网络)
- mangle表：用于修改数据包标志和其他字段，通常不直接处理过滤规则，而是用来做一些特殊操作，如改变TTL值等
- raw表：用于原始套接字处理，主要用于决定是否跟踪数据包的连接状态。

5链

- INPUT 链：可以用来过滤或修改从外部网络到本地系统的数据包。(进方向)
- OUTPUT 链：这是针对本地生成的数据包的链，即将要发送出去的数据包。（出方向）
- FORWARD 链：用于过滤或修改从一个接口进入另一个接口的数据包。(路过)
- PREROUTING 链：用于对即将离开系统的数据包进行NAT操作（如SNAT）。
- POSTROUTING 链：通常用于DNAT（目标网络地址转换），例如将外部请求重定向到本地服务。

![image-20241111153138832](D:\blogs\img\linux\image-20241111153138832.png)

